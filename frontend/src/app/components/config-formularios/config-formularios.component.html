<div class="config-container">
  <div class="header-config">
    <div class="header-icon">‚öôÔ∏è</div>
    <h2>Configuraci√≥n de Formularios por M√≥dulo</h2>
    <p class="subtitle">
      Personaliza qu√© campos aparecen en el formulario de soporte seg√∫n cada m√≥dulo
    </p>
  </div>

  <!-- Mensajes -->
  <div *ngIf="error" class="alert alert-error">
    {{ error }}
    <button (click)="error = ''" class="btn-close">√ó</button>
  </div>

  <div *ngIf="exito" class="alert alert-success">
    {{ exito }}
    <button (click)="exito = ''" class="btn-close">√ó</button>
  </div>

  <!-- Loading -->
  <div *ngIf="cargando" class="loading-state">
    <div class="spinner"></div>
    <p>Cargando configuraciones...</p>
  </div>

  <!-- Lista de m√≥dulos -->
  <div *ngIf="!cargando" class="modulos-grid">
    <div *ngFor="let moduloConfig of configuraciones" class="modulo-card">
      <div class="modulo-header">
        <h3>{{ moduloConfig.modulo_nombre }}</h3>
        <span class="modulo-id">ID: {{ moduloConfig.modulo_id }}</span>
      </div>

      <div class="config-campos">
        <p class="info-text">
          <strong>Los campos siempre visibles son:</strong> Nombre Completo, Correo y Descripci√≥n
          del Problema
        </p>

        <div class="campo-config">
          <label class="campo-label">
            <input
              type="checkbox"
              [(ngModel)]="moduloConfig.config.mostrar_tipo_identificacion"
              class="campo-checkbox"
            />
            <span class="campo-nombre">Tipo de Identificaci√≥n</span>
          </label>
        </div>

        <div class="campo-config">
          <label class="campo-label">
            <input
              type="checkbox"
              [(ngModel)]="moduloConfig.config.mostrar_cedula"
              class="campo-checkbox"
            />
            <span class="campo-nombre">N√∫mero de Identificaci√≥n</span>
          </label>
        </div>

        <div class="campo-config">
          <label class="campo-label">
            <input
              type="checkbox"
              [(ngModel)]="moduloConfig.config.mostrar_telefono"
              class="campo-checkbox"
            />
            <span class="campo-nombre">Tel√©fono</span>
          </label>
        </div>

        <div class="campo-config">
          <label class="campo-label">
            <input
              type="checkbox"
              [(ngModel)]="moduloConfig.config.mostrar_numero_contrato"
              class="campo-checkbox"
            />
            <span class="campo-nombre">N√∫mero de Contrato</span>
          </label>
        </div>

        <div class="campo-config">
          <label class="campo-label">
            <input
              type="checkbox"
              [(ngModel)]="moduloConfig.config.mostrar_screenshot"
              class="campo-checkbox"
            />
            <span class="campo-nombre">Captura de Pantalla</span>
          </label>
        </div>
      </div>

      <div class="modulo-actions">
        <button
          class="btn btn-guardar"
          (click)="guardarConfiguracion(moduloConfig)"
          [disabled]="guardando === moduloConfig.modulo_id"
        >
          <span *ngIf="guardando === moduloConfig.modulo_id">‚è≥ Guardando...</span>
          <span *ngIf="guardando !== moduloConfig.modulo_id">üíæ Guardar</span>
        </button>

        <button
          class="btn btn-restablecer"
          (click)="restablecerConfiguracion(moduloConfig)"
          [disabled]="guardando === moduloConfig.modulo_id"
        >
          üîÑ Restablecer
        </button>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="!cargando && configuraciones.length === 0" class="empty-state">
    <div class="empty-icon">üì¶</div>
    <h3>No hay m√≥dulos configurados</h3>
    <p>Agrega m√≥dulos primero para poder configurar sus formularios</p>
  </div>
</div>
