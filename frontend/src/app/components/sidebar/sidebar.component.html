<div class="sidebar-container" [class.expanded]="isExpanded">
  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <span class="logo-icon">â“</span>
        <h2>FAQ</h2>
      </div>
      <button class="toggle-btn" (click)="toggleSidebar()" title="Expandir/Contraer menÃº">
        â˜°
      </button>
    </div>

    <ul class="sidebar-menu">
      <li>
        <button class="menu-item" (click)="irA('/categorias')" title="Ver todas las categorÃ­as">
          <span class="icon">ğŸ </span>
          <span class="label">Inicio</span>
        </button>
      </li>
      
      <li>
        <button class="menu-item" (click)="openAddModuloModal()">
          <span class="icon">â•</span>
          <span class="label">Crear Nuevo</span>
        </button>
      </li>
      
      <li class="divider"></li>
      
      <li>
        <button class="menu-item logout-btn" (click)="logout()" title="Cerrar sesiÃ³n y volver al login">
          <span class="icon">ğŸšª</span>
          <span class="label">Salir</span>
        </button>
      </li>
    </ul>
  </nav>

  <!-- Modal para agregar mÃ³dulo -->
  <div *ngIf="showAddModuloModal" class="modal-overlay" (click)="closeAddModuloModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>âœ¨ Crear una Nueva SecciÃ³n</h3>
        <button class="close-btn" (click)="closeAddModuloModal()">âœ•</button>
      </div>

      <div class="modal-body">
        <div class="modal-intro">
          <p>Completa los datos para crear una nueva secciÃ³n en tu base de datos.</p>
        </div>

        <form (ngSubmit)="agregarModulo()">
          <!-- Campo: Nombre -->
          <div class="form-group">
            <label for="nombre">
              <span class="label-icon">ğŸ“</span>
              <span>Â¿CuÃ¡l es el nombre de la secciÃ³n?</span>
            </label>
            <input
              type="text"
              id="nombre"
              class="form-control"
              [(ngModel)]="nuevoModulo.nombre"
              name="nombre"
              placeholder="Ej: Crear un usuario, Reportes mensuales"
              required
            />
          </div>

          <!-- Campo: DescripciÃ³n -->
          <div class="form-group">
            <label for="descripcion">
              <span class="label-icon">ğŸ’¬</span>
              <span>DescripciÃ³n (opcional)</span>
            </label>
            <textarea
              id="descripcion"
              class="form-control"
              [(ngModel)]="nuevoModulo.descripcion"
              name="descripcion"
              placeholder="Explica brevemente de quÃ© trata esta secciÃ³n..."
              rows="3"
            ></textarea>
          </div>

          <!-- Campo: SecciÃ³n Padre -->
          <div class="form-group">
            <label for="idpadre">
              <span class="label-icon">ğŸ“‚</span>
              <span>Â¿Pertenece a alguna categorÃ­a?</span>
            </label>
            <select
              id="idpadre"
              class="form-control"
              [(ngModel)]="nuevoModulo.idpadre"
              name="idpadre"
            >
              <option [value]="null">âœ¨ Crear como categorÃ­a principal (aparecerÃ¡ en el inicio)</option>
              <optgroup label="â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”">
                <option *ngFor="let modulo of modulosPadre" [value]="modulo.id">
                  ğŸ“ {{ modulo.nombre }}
                </option>
              </optgroup>
            </select>
          </div>

          <!-- Campo: Resumen selecciÃ³n -->
          <div class="form-group preview-box">
            <strong>ğŸ“Œ Vista previa:</strong>
            <div class="preview-content">
              <p *ngIf="!nuevoModulo.idpadre" class="preview-text">
                <span class="badge">NUEVA CATEGORÃA</span>
                <span>Se mostrarÃ¡ como una nueva opciÃ³n en la pÃ¡gina de inicio</span>
              </p>
              <p *ngIf="nuevoModulo.idpadre" class="preview-text">
                <span class="badge subcategory">SUBCATEGORÃA</span>
                <span>Se mostrarÃ¡ dentro de: <strong>{{ getNombreModuloPadre(nuevoModulo.idpadre) }}</strong></span>
              </p>
            </div>
          </div>

          <!-- Mostrar errores -->
          <div *ngIf="error" class="error-message">
            <span class="error-icon">âš ï¸</span>
            <span>{{ error }}</span>
          </div>

          <!-- Botones -->
          <div class="form-buttons">
            <button type="submit" class="btn-primary" [disabled]="loading">
              <span *ngIf="!loading">âœ“ Crear SecciÃ³n</span>
              <span *ngIf="loading">â³ Creando...</span>
            </button>
            <button type="button" class="btn-secondary" (click)="closeAddModuloModal()" [disabled]="loading">
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
